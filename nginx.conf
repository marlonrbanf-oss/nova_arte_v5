# Define a raiz do projeto (no Railway geralmente é /app)
root /app;
index index.php index.html;

location / {
    # Tenta encontrar o arquivo exato ($uri) ou a pasta ($uri/)
    # Se não encontrar NADA disso, aí sim vai para o index.php
    try_files $uri $uri/ /index.php?$query_string;
}

# Garante que arquivos estáticos sejam servidos corretamente
location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|otf)$ {
    access_log off;
    expires max;
    log_not_found off;
}

location ~ \.php$ {
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    # No Railway, o PHP-FPM costuma rodar em um socket ou na porta 9000
    fastcgi_pass 127.0.0.1:9000; 
}